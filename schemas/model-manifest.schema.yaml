$schema: http://json-schema.org/draft-07/schema#
title: SQLTemple Model Manifest
description: Schema for SQLTemple model manifest files
type: object

required:
  - name
  - version
  - base_model
  - training
  - links
  - metadata

properties:
  name:
    type: string
    description: Name of the model
    pattern: "^[a-z0-9-]+$"
    
  version:
    type: string
    description: Version of the model (semantic versioning)
    pattern: "^\\d+\\.\\d+\\.\\d+(-[a-z0-9]+)?$"
    
  base_model:
    type: string
    description: Base model used for training
    
  training:
    type: object
    required:
      - dataset
      - training_examples
      - eval_examples
      - epochs
      - training_completed
    properties:
      dataset:
        type: string
        description: Training dataset name
      training_examples:
        type: integer
        minimum: 1
        description: Number of training examples
      eval_examples:
        type: integer
        minimum: 1
        description: Number of evaluation examples
      epochs:
        type: integer
        minimum: 1
        description: Number of training epochs
      lora_config:
        type: object
        description: LoRA configuration parameters
        properties:
          r:
            type: integer
            description: LoRA rank
          alpha:
            type: integer
            description: LoRA alpha parameter
          target_modules:
            type: array
            items:
              type: string
            description: Target modules for LoRA
          dropout:
            type: number
            minimum: 0
            maximum: 1
            description: Dropout rate
      training_completed:
        type: string
        format: date-time
        description: ISO timestamp of training completion
        
  links:
    type: object
    required:
      - huggingface
      - gguf
    properties:
      huggingface:
        type: string
        format: uri
        description: HuggingFace model repository URL
      gguf:
        type: string
        format: uri
        description: GGUF model file download URL
        
  metadata:
    type: object
    properties:
      description:
        type: string
        description: Model description
      tags:
        type: array
        items:
          type: string
        description: Model tags
      license:
        type: string
        description: Model license
      output_formats:
        type: array
        items:
          type: string
        description: Available output formats
      output_files:
        type: object
        description: Output file mappings
        additionalProperties:
          type: string